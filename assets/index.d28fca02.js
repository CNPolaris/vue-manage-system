import{r as e,o as t,c as a,d as s,a as n,u as o,b as l,e as r,f as i,w as d,g as c,h as m,t as u,p,i as h,j as f,k as g,F as b,l as v,n as _,m as y,T as I,q as k,K as w,s as x,v as T,x as C,_ as E,y as P,z as L,A,B as O,C as S}from"./vendor.6679d492.js";var q=(e,t)=>{const a=e.__vccOpts||e;for(const[s,n]of t)a[s]=n;return a};var R=q({},[["render",function(s,n,o,l,r,i){const d=e("router-view");return t(),a(d)}]]);let j;const N={},$=function(e,t){if(!t)return e();if(void 0===j){const e=document.createElement("link").relList;j=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in N)return;N[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":j,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))},D=s("sidebar",{state:()=>({collapse:!1}),getters:{},actions:{handleCollapse(){this.collapse=!this.collapse}}}),V=s("tags",{state:()=>({list:[]}),getters:{show:e=>e.list.length>0,nameList:e=>e.list.map((e=>e.name))},actions:{delTagsItem(e){this.list.splice(e,1)},setTagsItem(e){this.list.push(e)},clearTags(){this.list=[]},closeTagsOther(e){this.list=e},closeCurrentTag(e){console.log(e);for(let t=0,a=this.list.length;t<a;t++){if(this.list[t].path===e.$route.fullPath){t<a-1?e.$router.push(this.list[t+1].path):t>0?e.$router.push(this.list[t-1].path):e.$router.push("/"),this.list.splice(t,1);break}}}}});const z={setup(){const e=localStorage.getItem("ms_username"),t=localStorage.getItem("ms_avatar"),a=D(),s=()=>{a.handleCollapse()};n((()=>{document.body.clientWidth<1500&&s()}));const l=o();return{sidebar:a,username:e,avatar:t,message:2,collapseChage:s,handleCommand:e=>{"loginout"==e?(localStorage.removeItem("ms_username"),localStorage.removeItem("token"),localStorage.removeItem("ms_avatar"),l.push("/login")):"user"==e&&l.push("/user")}}}},H=e=>(p("data-v-39a16adc"),e=e(),h(),e),U={class:"header"},W={key:0,class:"el-icon-s-fold"},B={key:1,class:"el-icon-s-unfold"},F=H((()=>r("div",{class:"logo"},"后台管理系统",-1))),K={class:"header-right"},G={class:"header-user-con"},J={class:"btn-bell"},M=H((()=>r("i",{class:"el-icon-bell"},null,-1))),Q={key:0,class:"btn-bell-badge"},X={class:"user-avator"},Y=["src"],Z={class:"el-dropdown-link"},ee=H((()=>r("i",{class:"el-icon-caret-bottom"},null,-1))),te={href:"https://github.com/CNPolaris/vue-manage-system",target:"_blank"},ae=m("项目仓库"),se=m("个人中心"),ne=m("退出登录");var oe=q(z,[["render",function(a,s,n,o,p,h){const f=e("router-link"),g=e("el-tooltip"),b=e("el-dropdown-item"),v=e("el-dropdown-menu"),_=e("el-dropdown");return t(),l("div",U,[r("div",{class:"collapse-btn",onClick:s[0]||(s[0]=(...e)=>o.collapseChage&&o.collapseChage(...e))},[o.sidebar.collapse?(t(),l("i",B)):(t(),l("i",W))]),F,r("div",K,[r("div",G,[r("div",J,[i(g,{effect:"dark",content:o.message?`有${o.message}条未读消息`:"消息中心",placement:"bottom"},{default:d((()=>[i(f,{to:"/tabs"},{default:d((()=>[M])),_:1})])),_:1},8,["content"]),o.message?(t(),l("span",Q)):c("",!0)]),r("div",X,[r("img",{src:o.avatar},null,8,Y)]),i(_,{class:"user-name",trigger:"click",onCommand:o.handleCommand},{dropdown:d((()=>[i(v,null,{default:d((()=>[r("a",te,[i(b,null,{default:d((()=>[ae])),_:1})]),i(b,{command:"user"},{default:d((()=>[se])),_:1}),i(b,{divided:"",command:"loginout"},{default:d((()=>[ne])),_:1})])),_:1})])),default:d((()=>[r("span",Z,[m(u(o.username)+" ",1),ee])])),_:1},8,["onCommand"])])])])}],["__scopeId","data-v-39a16adc"]]);const le={class:"sidebar"};var re=q({setup(){const e=f();return{items:[{icon:"el-icon-lx-home",index:"/dashboard",title:"系统首页"},{icon:"el-icon-user",index:"/admin/user",title:"用户管理"},{icon:"el-icon-user",index:"/role",title:"角色管理"},{icon:"el-icon-office-building",index:"/department",title:"部门管理"}],onRoutes:g((()=>e.path)),sidebar:D()}}},[["render",function(s,n,o,c,p,h){const f=e("el-menu-item"),g=e("el-submenu"),y=e("el-menu");return t(),l("div",le,[i(y,{class:"sidebar-el-menu","default-active":c.onRoutes,collapse:c.sidebar.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""},{default:d((()=>[(t(!0),l(b,null,v(c.items,(e=>(t(),l(b,null,[e.subs?(t(),a(g,{index:e.index,key:e.index},{title:d((()=>[r("i",{class:_(e.icon)},null,2),r("span",null,u(e.title),1)])),default:d((()=>[(t(!0),l(b,null,v(e.subs,(e=>(t(),l(b,null,[e.subs?(t(),a(g,{index:e.index,key:e.index},{title:d((()=>[m(u(e.title),1)])),default:d((()=>[(t(!0),l(b,null,v(e.subs,((e,s)=>(t(),a(f,{key:s,index:e.index},{default:d((()=>[m(u(e.title),1)])),_:2},1032,["index"])))),128))])),_:2},1032,["index"])):(t(),a(f,{index:e.index,key:e.index},{default:d((()=>[m(u(e.title),1)])),_:2},1032,["index"]))],64)))),256))])),_:2},1032,["index"])):(t(),a(f,{index:e.index,key:e.index},{title:d((()=>[m(u(e.title),1)])),default:d((()=>[r("i",{class:_(e.icon)},null,2)])),_:2},1032,["index"]))],64)))),256))])),_:1},8,["default-active","collapse"])])}],["__scopeId","data-v-7dd2c22a"]]);const ie={setup(){const e=f(),t=o(),a=V(),s=e=>{a.list.some((t=>t.path===e.fullPath))||(a.list.length>=8&&a.delTagsItem(0),a.setTagsItem({name:e.name,title:e.meta.title,path:e.fullPath}))};s(e),y((e=>{s(e)}));return{isActive:t=>t===e.fullPath,tags:a,closeTags:s=>{const n=a.list[s];a.delTagsItem(s);const o=a.list[s]?a.list[s]:a.list[s-1];o?n.path===e.fullPath&&t.push(o.path):t.push("/")},handleTags:s=>{"other"===s?(()=>{const t=a.list.filter((t=>t.path===e.fullPath));a.closeTagsOther(t)})():(a.clearTags(),t.push("/"))}}}},de={key:0,class:"tags"},ce=["onClick"],me=[r("i",{class:"el-icon-close"},null,-1)],ue={class:"tags-close-box"},pe=m(" 标签选项 "),he=r("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),fe=m("关闭其他"),ge=m("关闭所有");const be={class:"about"},ve={class:"content"};const _e=[{path:"/",redirect:"/dashboard"},{path:"/",name:"Home",component:q({components:{vHeader:oe,vSidebar:re,vTags:q(ie,[["render",function(a,s,n,o,p,h){const f=e("router-link"),g=e("el-button"),y=e("el-dropdown-item"),I=e("el-dropdown-menu"),k=e("el-dropdown");return o.tags.show?(t(),l("div",de,[r("ul",null,[(t(!0),l(b,null,v(o.tags.list,((e,a)=>(t(),l("li",{class:_(["tags-li",{active:o.isActive(e.path)}]),key:a},[i(f,{to:e.path,class:"tags-li-title"},{default:d((()=>[m(u(e.title),1)])),_:2},1032,["to"]),r("span",{class:"tags-li-icon",onClick:e=>o.closeTags(a)},me,8,ce)],2)))),128))]),r("div",ue,[i(k,{onCommand:o.handleTags},{dropdown:d((()=>[i(I,{size:"small"},{default:d((()=>[i(y,{command:"other"},{default:d((()=>[fe])),_:1}),i(y,{command:"all"},{default:d((()=>[ge])),_:1})])),_:1})])),default:d((()=>[i(g,{size:"mini",type:"primary"},{default:d((()=>[pe,he])),_:1})])),_:1},8,["onCommand"])])])):c("",!0)}]])},setup(){const e=D();return{tags:V(),sidebar:e}}},[["render",function(s,n,o,c,m,u){const p=e("v-header"),h=e("v-sidebar"),f=e("v-tags"),g=e("router-view");return t(),l("div",be,[i(p),i(h),r("div",{class:_(["content-box",{"content-collapse":c.sidebar.collapse}])},[i(f),r("div",ve,[i(g,null,{default:d((({Component:e})=>[i(I,{name:"move",mode:"out-in"},{default:d((()=>[(t(),a(w,{include:c.tags.nameList},[(t(),a(k(e)))],1032,["include"]))])),_:2},1024)])),_:1})])],2)])}]]),children:[{path:"/dashboard",name:"dashboard",meta:{title:"系统首页"},component:()=>$((()=>import("./Dashboard.624bb67c.js")),["/vue-manage-system/assets/Dashboard.624bb67c.js","/vue-manage-system/assets/Dashboard.fa2e9666.css","/vue-manage-system/assets/vendor.6679d492.js"])},{path:"/admin/user",name:"adminUser",meta:{title:"用户列表"},component:()=>$((()=>import("./alluser.c15bda21.js")),["/vue-manage-system/assets/alluser.c15bda21.js","/vue-manage-system/assets/request.2d0c7259.js","/vue-manage-system/assets/department.7e79b1a4.js","/vue-manage-system/assets/vendor.6679d492.js"])},{path:"/role",name:"RoleList",meta:{title:"角色列表"},component:()=>$((()=>import("./index.913e8fe1.js")),["/vue-manage-system/assets/index.913e8fe1.js","/vue-manage-system/assets/request.2d0c7259.js","/vue-manage-system/assets/vendor.6679d492.js"])},{path:"/department",name:"department",meta:{title:"部门管理"},component:()=>$((()=>import("./index.db43e36d.js")),["/vue-manage-system/assets/index.db43e36d.js","/vue-manage-system/assets/department.7e79b1a4.js","/vue-manage-system/assets/request.2d0c7259.js","/vue-manage-system/assets/vendor.6679d492.js"])},{path:"/user",name:"personal",meta:{title:"个人中心"},component:()=>$((()=>import("./User.937fa59f.js")),["/vue-manage-system/assets/User.937fa59f.js","/vue-manage-system/assets/User.1a70fade.css","/vue-manage-system/assets/vendor.6679d492.js"])}]},{path:"/login",name:"Login",meta:{title:"登录"},component:()=>$((()=>import("./Login.07ff2789.js")),["/vue-manage-system/assets/Login.07ff2789.js","/vue-manage-system/assets/Login.ce7670f3.css","/vue-manage-system/assets/vendor.6679d492.js","/vue-manage-system/assets/request.2d0c7259.js"])}],ye=x({history:T(),routes:_e});ye.beforeEach(((e,t,a)=>{document.title=`${e.meta.title} | vue-manage-system`;const s=localStorage.getItem("ms_username");s||"/login"===e.path?e.meta.permission?"admin"===s?a():a("/403"):a():a("/login")}));const Ie=C({locale:E.name,fallbackLocale:P.name,messages:{"zh-cn":{i18n:{breadcrumb:"国际化产品",tips:"通过切换语言按钮，来改变当前内容的语言。",btn:"切换英文",title1:"常用用法",p1:"要是你把你的秘密告诉了风，那就别怪风把它带给树。",p2:"没有什么比信念更能支撑我们度过艰难的时光了。",p3:"只要能把自己的事做好，并让自己快乐，你就领先于大多数人了。"}},en:{i18n:{breadcrumb:"International Products",tips:"Click on the button to change the current language. ",btn:"Switch Chinese",title1:"Common usage",p1:"If you reveal your secrets to the wind you should not blame the wind for  revealing them to the trees.",p2:"Nothing can help us endure dark times better than our faith. ",p3:"If you can do what you do best and be happy, you're further along in life  than most people."}}}});const ke={admin:{token:"admin-token"},editor:{token:"editor-token"}},we={"admin-token":{roles:["admin"],introduction:"I am a super administrator",avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",name:"Super Admin"},"editor-token":{roles:["editor"],introduction:"I am an editor",avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",name:"Normal Editor"}};var xe=[{url:"/api/user/login",method:"post",response:e=>{const{username:t}=e.body,a=ke[t];return a?{code:2e3,data:a,message:"登录成功"}:{code:1e3,data:"",message:"unsuccessful"}}},{url:"/api/user/info",method:"get",response:e=>{const{token:t}=e.query,a=we[t];return a?{code:2e3,data:a}:{code:1e3,data:void 0}}}];const Te=[{id:1,username:"test01",password:"123456",nickName:"王朝",role:1,avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",age:19,sex:1,brith:"2022-7-21",createTime:"2022-7-21 17:08",status:1,departmentId:1,companyId:2},{id:2,username:"test02",password:"123456",nickName:"马汉",role:1,avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",age:19,sex:1,brith:"2022-7-21",createTime:"2022-7-21 17:08",status:1,departmentId:2,companyId:2},{id:3,username:"test03",password:"123456",nickName:"张龙",role:2,avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",age:19,sex:1,brith:"2022-7-21",createTime:"2022-7-21 17:08",status:1,departmentId:1,companyId:2},{id:4,username:"test04",password:"123456",nickName:"赵虎",role:2,avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",age:19,sex:1,brith:"2022-7-21",createTime:"2022-7-21 17:08",status:1,departmentId:1,companyId:2},{id:5,username:"test05",password:"123456",nickName:"王朝",role:2,avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",age:19,sex:1,brith:"2022-7-21",createTime:"2022-7-21 17:08",status:1,departmentId:1,companyId:2}],Ce=[{id:1,name:"北极星科技",address:"中国",country:"中国",province:"上海市",city:"",area:"静安区",superiorId:null},{id:2,name:"南京分公司",address:"南京雨花台区",country:"中国",province:"江苏省",city:"南京市",area:"雨花台区",superiorId:1},{id:3,name:"北京分公司",address:"北京市朝阳区",country:"中国",province:"北京市",city:"",area:"朝阳区",superiorId:1}],Ee=[{id:1,name:"研发部",companyId:2,status:!0},{id:2,name:"财务部",companyId:2,status:!0},{id:3,name:"测试部",companyId:2,status:!0},{id:4,name:"运维部",companyId:2,status:!0},{id:5,name:"法务部",companyId:2,status:!0},{id:6,name:"研发部",companyId:3,status:!0},{id:7,name:"财务部",companyId:3,status:!0},{id:8,name:"测试部",companyId:3,status:!0},{id:9,name:"运维部",companyId:3,status:!0},{id:10,name:"法务部",companyId:3,status:!0}];function Pe(e){let t=[];for(let a of Ce)a.superiorId===e&&t.push(a);return t}function Le(e){let t=[];for(let a of Ee)a.companyId===e&&t.push(a);return t}var Ae=[{url:"/api/admin/user/list",method:"post",response:e=>{const{username:t,role:a}=e.body;let s=[];if(t||a)for(let n of Te)n.username!==t&&n.role!==a||s.push(n);else s=Te;for(let n of s){for(let e of Ce)n.companyId===e.id&&(n.company=e.name);for(let e of Ee)n.departmentId===e.id&&(n.department=e.name)}return{code:2e3,data:{list:s,total:Te.length}}}},{url:"/api/admin/user/delete",method:"get",response:e=>{const{id:t}=e.query,a=[];console.log(t);for(const s of Te)s.id!=t&&a.push(s);return{code:2e3,message:"删除成功",data:{list:a}}}},{url:"/api/admin/user/detail",method:"get",response:e=>{const{id:t}=e.query;for(const a of Te)if(a.id===+t)return{code:2e3,data:a}}},{url:"/api/department/struct",method:"get",response:e=>{e.query;let t=[];for(let a of Ce)if(!a.superiorId){let e={};e.label=a.name;const s=Pe(a.id);let n=[];for(let t of s){let e={};e.label=t.name;const a=Le(t.id);let s=[];for(let t of a)s.push({label:t.name});e.children=s,n.push(e)}e.children=n,t.push(e)}return{code:2e3,data:t}}},{url:"/api/department/page",method:"get",response:e=>{e.query;let t=[];for(let a of Ee){for(let e of Ce)e.id==a.companyId&&(a.company=e.name,a.address=e.province+e.city+e.area);t.push(a)}return{code:2e3,data:{list:t,total:Ee.length},message:"获取成功"}}},{url:"/api/company/list",method:"get",response:e=>({code:2e3,data:Ce})}];const Oe=[{id:1,name:"超级管理员",code:"admin",order:1,status:!0,createTime:"2022-07-19 16:16:08"},{id:1,name:"普通用户",code:"common",order:2,status:!0,createTime:"2022-07-19 16:16:08"}];var Se=[{url:"/api/role/list",method:"get",response:e=>{const{page:t,limit:a,name:s,status:n,code:o}=e.query;let l=[];if(s||n||o)for(let r of Oe)r.name!=s&&r.status!=n&&r.code!=o||l.push(r);else l=Oe;return{code:2e3,data:{list:l,total:Oe.length},message:"成功"}}}];const qe=O(R);var Re;(Re=qe).use(L,{locale:E}),Re.use(Ie),A([...xe,...Ae,...Se]),qe.use(S()).use(ye).mount("#app");export{q as _,V as u};
